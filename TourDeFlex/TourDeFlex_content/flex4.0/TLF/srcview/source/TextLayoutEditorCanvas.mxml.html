<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>TextLayoutEditorCanvas.mxml</title>
<link rel="stylesheet" type="text/css" href="../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>


<span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">
    xmlns="</span><span class="MXMLString">http://ns.adobe.com/mxml/2009</span><span class="MXMLDefault_Text">"
     xmlns:mx="</span><span class="MXMLString">library://ns.adobe.com/flex/mx</span><span class="MXMLDefault_Text">"
    xmlns:flow="</span><span class="MXMLString">library://ns.adobe.com/flashx/textLayout</span><span class="MXMLDefault_Text">"
    xmlns:textEditBar="</span><span class="MXMLString">textEditBar.*</span><span class="MXMLDefault_Text">"
    xmlns:txui="</span><span class="MXMLString">flashx.textLayout.ui.*</span><span class="MXMLDefault_Text">"
    xmlns:txrulers="</span><span class="MXMLString">flashx.textLayout.ui.rulers.*</span><span class="MXMLDefault_Text">"
    xmlns:txinsp="</span><span class="MXMLString">flashx.textLayout.ui.inspectors.*</span><span class="MXMLDefault_Text">"
    explicitMinWidth="</span><span class="MXMLString">300</span><span class="MXMLDefault_Text">" 
    explicitMinHeight="</span><span class="MXMLString">200</span><span class="MXMLDefault_Text">"
    creationComplete="</span><span class="ActionScriptDefault_Text">handleCreationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"
    resize="</span><span class="ActionScriptDefault_Text">handleResize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
    
        
    <span class="MXMLSpecial_Tag">&lt;Script&gt;</span>&lt;![CDATA[
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">container</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ContainerController</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">debug</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">assert</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EditManager</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EditingMode</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ElementRange</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ISelectionManager</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectionFormat</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectionManager</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">edit</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectionState</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">elements</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Configuration</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">elements</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">InlineGraphicElementStatus</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">elements</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ParagraphElement</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">elements</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SpanElement</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">elements</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TextFlow</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectionEvent</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">StatusChangeEvent</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formats</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TextLayoutFormat</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">undo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IUndoManager</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">undo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UndoManager</span>;
        
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">textEditBar</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FileIOHelper</span>;
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flashx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textLayout</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ui</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">inspectors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TextInspectorController</span>;
        
        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IndexChangedEvent</span>;
                
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resizeOK</span>:<span class="ActionScriptDefault_Text">Boolean</span>;
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">activeFlow</span>:<span class="ActionScriptDefault_Text">TextFlow</span>;

        <span class="ActionScriptComment">// undo/redo manager
</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">undoManager</span>:<span class="ActionScriptDefault_Text">IUndoManager</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bottomPanels</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
        
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleCreationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>: <span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">initializeConfiguration</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">FileIOHelper</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parentWindow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;
            <span class="ActionScriptDefault_Text">FileIOHelper</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">changeContent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">changeContent</span>;
                    
            <span class="ActionScriptDefault_Text">resizeOK</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">handleResize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                          
             <span class="ActionScriptDefault_Text">undoManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">UndoManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                           
            <span class="ActionScriptDefault_Text">hruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">creationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptDefault_Text">vruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">creationComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">numPanels</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomTabs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">numChildren</span>;
             <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">numPanels</span>; <span class="ActionScriptOperator">++</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span>
             <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panel</span>:<span class="ActionScriptDefault_Text">Canvas</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomTabs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Canvas</span>;
                 <span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">panel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                 <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                     <span class="ActionScriptDefault_Text">panel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeAllChildren</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
              <span class="ActionScriptDefault_Text">bottomTabs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">IndexChangedEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CHANGE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">onBottomTabChanged</span><span class="ActionScriptBracket/Brace">)</span>;
              
              <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ACTIVATE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">onFocus</span><span class="ActionScriptBracket/Brace">)</span>; 
              
            <span class="ActionScriptDefault_Text">changeContent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">createEmptyFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">callLater</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">doFocus</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">doFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selMgr</span>:<span class="ActionScriptDefault_Text">ISelectionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selMgr</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">textPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">selMgr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createEmptyFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">TextFlow</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">newFlow</span>:<span class="ActionScriptDefault_Text">TextFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">TextFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">para</span>:<span class="ActionScriptDefault_Text">ParagraphElement</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ParagraphElement</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">para</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SpanElement</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">newFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">para</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">newFlow</span>;
        <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initializeConfiguration</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">config</span>:<span class="ActionScriptDefault_Text">Configuration</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">TextFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">defaultConfiguration</span>;
            <span class="ActionScriptDefault_Text">config</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unfocusedSelectionFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SelectionFormat</span><span class="ActionScriptBracket/Brace">(</span>0xffffff<span class="ActionScriptOperator">,</span> 1.0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">BlendMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DIFFERENCE</span><span class="ActionScriptOperator">,</span> 0xffffff<span class="ActionScriptOperator">,</span> 1.0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">BlendMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DIFFERENCE</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">config</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">inactiveSelectionFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SelectionFormat</span><span class="ActionScriptBracket/Brace">(</span>0xffffff<span class="ActionScriptOperator">,</span> 1.0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">BlendMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DIFFERENCE</span><span class="ActionScriptOperator">,</span> 0xffffff<span class="ActionScriptOperator">,</span> 1.0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">BlendMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DIFFERENCE</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">config</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">manageTabKey</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">initialFormat</span>:<span class="ActionScriptDefault_Text">TextLayoutFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">TextLayoutFormat</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fontFamily</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"Arial"</span>;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fontSize</span> <span class="ActionScriptOperator">=</span> 16;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">paddingLeft</span> <span class="ActionScriptOperator">=</span> 2;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">paddingTop</span> <span class="ActionScriptOperator">=</span> 2;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">paddingRight</span> <span class="ActionScriptOperator">=</span> 2;
            <span class="ActionScriptDefault_Text">initialFormat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">paddingBottom</span> <span class="ActionScriptOperator">=</span> 2;
            <span class="ActionScriptDefault_Text">config</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textFlowInitialFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">initialFormat</span>;
        <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>
             <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selMgr</span>:<span class="ActionScriptDefault_Text">ISelectionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span>;
                 <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selMgr</span><span class="ActionScriptBracket/Brace">)</span>
                     <span class="ActionScriptDefault_Text">selMgr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
             
         <span class="ActionScriptBracket/Brace">}</span>
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onBottomTabChanged</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span>:<span class="ActionScriptDefault_Text">IndexChangedEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panel</span>:<span class="ActionScriptDefault_Text">Canvas</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomTabs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">oldIndex</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Canvas</span>;
             <span class="ActionScriptDefault_Text">panel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeAllChildren</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptDefault_Text">panel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomTabs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">newIndex</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Canvas</span>;
             <span class="ActionScriptDefault_Text">panel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">newIndex</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
         <span class="ActionScriptBracket/Brace">}</span>
         
          <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">editingMode</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">EditingMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">READ_WRITE</span>;
         
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">keyListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">KeyboardEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">keyCode</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">Keyboard</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ESCAPE</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectRange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptOperator">,</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
         <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateEscapeKeyListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">numControllers</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
             <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controller</span>:<span class="ActionScriptDefault_Text">ContainerController</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getControllerAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span>;
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">container</span>:<span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controller</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">container</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject</span>;
                 <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span><span class="ActionScriptBracket/Brace">)</span>
                     <span class="ActionScriptDefault_Text">container</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">KeyboardEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">KEY_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">keyListener</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
                 <span class="ActionScriptReserved">else</span> 
                     <span class="ActionScriptDefault_Text">container</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">KeyboardEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">KEY_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">keyListener</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
         <span class="ActionScriptBracket/Brace">}</span>        

        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setActiveFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">newActiveFlow</span>:<span class="ActionScriptDefault_Text">TextFlow</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TextInspectorController</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Instance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">activeFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newActiveFlow</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&gt;=</span> 0; <span class="ActionScriptOperator">--</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">activeFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newActiveFlow</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
         <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setInteractionManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectType</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">editingMode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selectType</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uiActiveFlow</span>:<span class="ActionScriptDefault_Text">TextFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;

             <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>    
             <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectType</span><span class="ActionScriptBracket/Brace">)</span>
                 <span class="ActionScriptBracket/Brace">{</span>
                     <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">EditingMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">READ_ONLY</span>:
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">EditingMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">READ_WRITE</span>:
                        <span class="ActionScriptComment">// either direction should work.
</span>                        <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">EditManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">undoManager</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span>;
                        <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">EditManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">undoManager</span><span class="ActionScriptBracket/Brace">)</span>;
                        
                        <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SelectionEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SELECTION_CHANGE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mySelectionChangeListener</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">uiActiveFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span>;
                        <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectRange</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">EditingMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">READ_SELECT</span>:
                        <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SelectionManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SelectionEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SELECTION_CHANGE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mySelectionChangeListener</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">setActiveFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">uiActiveFlow</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">updateEscapeKeyListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">updateForSelectedElementRange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SelectionState</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    
    
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">mySelectionChangeListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">SelectionEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
              <span class="ActionScriptDefault_Text">updateForSelectedElementRange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectionState</span> : <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>;
         <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptASDoc">/**
         * Update the GUI for a particular selection range.
         * @private
         * @param range may be null
         */</span>
         <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateForSelectedElementRange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectionState</span>:<span class="ActionScriptDefault_Text">SelectionState</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
         <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">range</span>:<span class="ActionScriptDefault_Text">ElementRange</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selectionState</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">ElementRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">createElementRange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectionState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">textFlow</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">selectionState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">absoluteStart</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">selectionState</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">absoluteEnd</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selMgr</span>:<span class="ActionScriptDefault_Text">ISelectionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span>;
             
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">-</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&gt;=</span> 0; <span class="ActionScriptOperator">--</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">bottomPanels</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">update</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">range</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selMgr</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">textPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">selMgr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFocus</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
         <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptASDoc">/** handleResize - resize the child containers
           * @param alwaysResize - do the recalucation no matter if the size didn't change 
           */</span>
         <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handleResize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">resizeOK</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptDefault_Text">vruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RedrawRuler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                 <span class="ActionScriptDefault_Text">hruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RedrawRuler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">detachActiveFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">deleteTheComposer</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// Detach the containers from the display list
</span>                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">idx</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">idx</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">numControllers</span>; <span class="ActionScriptDefault_Text">idx</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controller</span>:<span class="ActionScriptDefault_Text">ContainerController</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getControllerAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">idx</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">oldContainer</span>:<span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controller</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">container</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">oldContainer</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">oldContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">Canvas</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">oldContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rawChildren</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">oldContainer</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeAllControllers</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptComment">// also shuts down inline graphics - need another API if we want to do this another way
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">deleteTheComposer</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
            <span class="ActionScriptBracket/Brace">}</span>        
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">recomposeOnLoadComplete</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>:<span class="ActionScriptDefault_Text">StatusChangeEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">status</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">InlineGraphicElementStatus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ERROR</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"IOERROR loading inlinegraphicelement"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">element</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getTextFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">activeFlow</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">status</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">InlineGraphicElementStatus</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SIZE_PENDING</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">updateAllControllers</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">changeContent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">newFlow</span>:<span class="ActionScriptDefault_Text">TextFlow</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Remove old containers from the display list
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">undoManager</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> 
                <span class="ActionScriptDefault_Text">undoManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clearAll</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">detachActiveFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">StatusChangeEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">INLINE_GRAPHIC_STATUS_CHANGE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">recomposeOnLoadComplete</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// set activeFlow (note: this variable is used in the mxml code below.)
</span>            <span class="ActionScriptDefault_Text">activeFlow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newFlow</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span>;
                
            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">StatusChangeEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">INLINE_GRAPHIC_STATUS_CHANGE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">recomposeOnLoadComplete</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">textPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">changeContainerSetup</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">EditManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">undoManager</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SelectionEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SELECTION_CHANGE</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mySelectionChangeListener</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">setActiveFlow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">interactionManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectRange</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">updateEscapeKeyListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">activeFlow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flowComposer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">updateAllControllers</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

             <span class="ActionScriptDefault_Text">vruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RedrawRuler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptDefault_Text">hruler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RedrawRuler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
         <span class="ActionScriptBracket/Brace">}</span>
         
        <span class="ActionScriptASDoc">/** visiblePanels is an array of the labels of the right-side property panels that are opened.
         * if you set it, the panels specified will be opened and all others will be closed.
         */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">visiblePanels</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">inPanelNames</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panels</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inspectorBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildren</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panel</span>:<span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">panels</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">panel</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">MultiPanel</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mp</span>:<span class="ActionScriptDefault_Text">MultiPanel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">panel</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">MultiPanel</span>;
                    <span class="ActionScriptDefault_Text">mp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">inPanelNames</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">visiblePanels</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Array</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panels</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">inspectorBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildren</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panel</span>:<span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">panels</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">panel</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">MultiPanel</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mp</span>:<span class="ActionScriptDefault_Text">MultiPanel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">panel</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">MultiPanel</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">result</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
       <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/Script&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text">
        width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
        height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" 
        verticalGap="</span><span class="MXMLString">2</span><span class="MXMLDefault_Text">"
        backgroundColor="</span><span class="MXMLString">0x607D8A</span><span class="MXMLDefault_Text">"
        fontFamily="</span><span class="MXMLString">Myriad Pro</span><span class="MXMLDefault_Text">"
        fontWeight="</span><span class="MXMLString">bold</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text">
            width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
            height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
            horizontalGap="</span><span class="MXMLString">4</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;txui:PanelWithEdgeBars</span><span class="MXMLDefault_Text">
                id="</span><span class="MXMLString">panelWithScrollBars</span><span class="MXMLDefault_Text">"
                width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
                height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
                edgeInset="</span><span class="MXMLString">18</span><span class="MXMLDefault_Text">"
                gap="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">"
                mainPanel="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">textPanel</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                topBar="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">horizontalRulerBar</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                rightBar="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">verticalRulerBar</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                
                <span class="MXMLComponent_Tag">&lt;textEditBar:SingleContainerView</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">textPanel</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>

                <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">
                    id="</span><span class="MXMLString">verticalRulerBar</span><span class="MXMLDefault_Text">"
                    verticalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"
                    horizontalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txrulers:RulerBar</span><span class="MXMLDefault_Text">
                        id="</span><span class="MXMLString">vruler</span><span class="MXMLDefault_Text">"
                        orientation="</span><span class="MXMLString">vertical</span><span class="MXMLDefault_Text">"
                        syncToPanel="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">textPanel</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                        tabPropertyEditor="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">tabPropEditor</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                        tabPanelActive="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">tabPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txrulers:RulerBar&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">
                    id="</span><span class="MXMLString">horizontalRulerBar</span><span class="MXMLDefault_Text">"
                    verticalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"
                    horizontalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txrulers:RulerBar</span><span class="MXMLDefault_Text">
                        id="</span><span class="MXMLString">hruler</span><span class="MXMLDefault_Text">"
                        syncToPanel="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">textPanel</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                        tabPropertyEditor="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">tabPropEditor</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                        tabPanelActive="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">tabPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txrulers:RulerBar&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/txui:PanelWithEdgeBars&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">
                width="</span><span class="MXMLString">270</span><span class="MXMLDefault_Text">"
                height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
                horizontalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"
                backgroundColor="</span><span class="MXMLString">#D9D9D9</span><span class="MXMLDefault_Text">"
                verticalScrollBarStyleName="</span><span class="MXMLString">scrollbarStyle</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">inspectorBox</span><span class="MXMLDefault_Text">" verticalGap="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" backgroundColor="</span><span class="MXMLString">#D9D9D9</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">charPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">CHARACTER</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:CharacterPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">charPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>    
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">parPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">PARAGRAPH</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:ParagraphPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">parPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">tabPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">TAB</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" opened="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:TabPropertyEditor</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">tabPropEditor</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">advancedPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">ADVANCED CHARACTER</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" opened="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:AdvancedTextPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">advancedPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">antialiasPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">ANTIALIAS</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" opened="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:AntiAliasPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">antialiasPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">containerPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">CONTAINER</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" opened="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:TextContainerPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">containerPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;txui:MultiPanel</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">flowPanel</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">multiPanel</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">FLOW</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" opened="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;txinsp:TextFlowPropertyEditor</span><span class="MXMLDefault_Text"> active="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">flowPanel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opened</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/txui:MultiPanel&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:TabNavigator</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">bottomTabs</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" creationPolicy="</span><span class="MXMLString">all</span><span class="MXMLDefault_Text">" paddingLeft="</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">" backgroundColor="</span><span class="MXMLString">#D9D9D9</span><span class="MXMLDefault_Text">" color="</span><span class="MXMLString">#202020</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text"> label="</span><span class="MXMLString">SOURCE</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">28</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                 <span class="MXMLComponent_Tag">&lt;textEditBar:FileServices</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">fileWidget</span><span class="MXMLDefault_Text">" fileChoose="</span><span class="MXMLString">FileIOHelper.fileChoose(event.fileName)</span><span class="MXMLDefault_Text">" textLayoutExport="</span><span class="MXMLString">FileIOHelper.textLayoutExport(activeFlow)</span><span class="MXMLDefault_Text">" htmlExport="</span><span class="MXMLString">FileIOHelper.htmlExport(activeFlow)</span><span class="MXMLDefault_Text">" includeInLayout="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span> 
            <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text"> label="</span><span class="MXMLString">LINKS</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                   <span class="MXMLComponent_Tag">&lt;textEditBar:LinkBar</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">linkElementProps</span><span class="MXMLDefault_Text">" creationPolicy="</span><span class="MXMLString">all</span><span class="MXMLDefault_Text">" includeInLayout="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>      
            <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text"> label="</span><span class="MXMLString">GRAPHICS</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;textEditBar:GraphicBar</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">foreignElementProps</span><span class="MXMLDefault_Text">" creationPolicy="</span><span class="MXMLString">all</span><span class="MXMLDefault_Text">" includeInLayout="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span>
            
        <span class="MXMLComponent_Tag">&lt;/mx:TabNavigator&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>

<span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span></pre></body>
</html>
